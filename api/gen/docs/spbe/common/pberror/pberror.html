<!DOCTYPE html>

<html>
  <head>
    <title>Protocol Documentation</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Ubuntu:400,700,400italic"/>
    <style>
      body {
        width: 60em;
        margin: 1em auto;
        color: #222;
        font-family: "Ubuntu", sans-serif;
        padding-bottom: 4em;
      }

      h1 {
        font-weight: normal;
        border-bottom: 1px solid #aaa;
        padding-bottom: 0.5ex;
      }

      h2 {
        border-bottom: 1px solid #aaa;
        padding-bottom: 0.5ex;
        margin: 1.5em 0;
      }

      h3 {
        font-weight: normal;
        border-bottom: 1px solid #aaa;
        padding-bottom: 0.5ex;
      }

      a {
        text-decoration: none;
        color: #567e25;
      }

      table {
        width: 100%;
        font-size: 80%;
        border-collapse: collapse;
      }

      thead {
        font-weight: 700;
        background-color: #dcdcdc;
      }

      tbody tr:nth-child(even) {
        background-color: #fbfbfb;
      }

      td {
        border: 1px solid #ccc;
        padding: 0.5ex 2ex;
      }

      td p {
        text-indent: 1em;
        margin: 0;
      }

      td p:nth-child(1) {
        text-indent: 0;  
      }

       
      .field-table td:nth-child(1) {  
        width: 10em;
      }
      .field-table td:nth-child(2) {  
        width: 10em;
      }
      .field-table td:nth-child(3) {  
        width: 6em;
      }
      .field-table td:nth-child(4) {  
        width: auto;
      }

       
      .extension-table td:nth-child(1) {  
        width: 10em;
      }
      .extension-table td:nth-child(2) {  
        width: 10em;
      }
      .extension-table td:nth-child(3) {  
        width: 10em;
      }
      .extension-table td:nth-child(4) {  
        width: 5em;
      }
      .extension-table td:nth-child(5) {  
        width: auto;
      }

       
      .enum-table td:nth-child(1) {  
        width: 10em;
      }
      .enum-table td:nth-child(2) {  
        width: 10em;
      }
      .enum-table td:nth-child(3) {  
        width: auto;
      }

       
      .scalar-value-types-table tr {
        height: 3em;
      }

       
      #toc-container ul {
        list-style-type: none;
        padding-left: 1em;
        line-height: 180%;
        margin: 0;
      }
      #toc > li > a {
        font-weight: bold;
      }

       
      .file-heading {
        width: 100%;
        display: table;
        border-bottom: 1px solid #aaa;
        margin: 4em 0 1.5em 0;
      }
      .file-heading h2 {
        border: none;
        display: table-cell;
      }
      .file-heading a {
        text-align: right;
        display: table-cell;
      }

       
      .badge {
        width: 1.6em;
        height: 1.6em;
        display: inline-block;

        line-height: 1.6em;
        text-align: center;
        font-weight: bold;
        font-size: 60%;

        color: #89ba48;
        background-color: #dff0c8;

        margin: 0.5ex 1em 0.5ex -1em;
        border: 1px solid #fbfbfb;
        border-radius: 1ex;
      }
    </style>

    
    <link rel="stylesheet" type="text/css" href="stylesheet.css"/>
  </head>

  <body>

    <h1 id="title">Protocol Documentation</h1>

    <h2>Table of Contents</h2>

    <div id="toc-container">
      <ul id="toc">
        
          
          <li>
            <a href="#spbe%2fcommon%2fpberror%2ferrors.proto">spbe/common/pberror/errors.proto</a>
            <ul>
              
                <li>
                  <a href="#bfi.common.pberror.Authorization"><span class="badge">M</span>Authorization</a>
                </li>
              
                <li>
                  <a href="#bfi.common.pberror.Business"><span class="badge">M</span>Business</a>
                </li>
              
                <li>
                  <a href="#bfi.common.pberror.Client"><span class="badge">M</span>Client</a>
                </li>
              
                <li>
                  <a href="#bfi.common.pberror.RateLimited"><span class="badge">M</span>RateLimited</a>
                </li>
              
                <li>
                  <a href="#bfi.common.pberror.Server"><span class="badge">M</span>Server</a>
                </li>
              
                <li>
                  <a href="#bfi.common.pberror.Validation"><span class="badge">M</span>Validation</a>
                </li>
              
                <li>
                  <a href="#bfi.common.pberror.Validation.Field"><span class="badge">M</span>Validation.Field</a>
                </li>
              
              
                <li>
                  <a href="#bfi.common.pberror.Authorization.ErrorCode"><span class="badge">E</span>Authorization.ErrorCode</a>
                </li>
              
                <li>
                  <a href="#bfi.common.pberror.Client.ErrorCode"><span class="badge">E</span>Client.ErrorCode</a>
                </li>
              
                <li>
                  <a href="#bfi.common.pberror.Server.ErrorCode"><span class="badge">E</span>Server.ErrorCode</a>
                </li>
              
                <li>
                  <a href="#bfi.common.pberror.Validation.ErrorCode"><span class="badge">E</span>Validation.ErrorCode</a>
                </li>
              
              
              
            </ul>
          </li>
        
        <li><a href="#scalar-value-types">Scalar Value Types</a></li>
      </ul>
    </div>

    
      
      <div class="file-heading">
        <h2 id="spbe/common/pberror/errors.proto">spbe/common/pberror/errors.proto</h2><a href="#title">Top</a>
      </div>
      <p></p>

      
        <h3 id="bfi.common.pberror.Authorization">Authorization</h3>
        <p>Authorization is error message that is related to request authorization.</p>

        
          <table class="field-table">
            <thead>
              <tr><td>Field</td><td>Type</td><td>Label</td><td>Description</td></tr>
            </thead>
            <tbody>
              
                <tr>
                  <td>trace</td>
                  <td><a href="#bfi.common.loginfo.Trace">bfi.common.loginfo.Trace</a></td>
                  <td></td>
                  <td><p>trace is optional information for developers, it contains identifier on the request for error tracking. </p></td>
                </tr>
              
                <tr>
                  <td>code</td>
                  <td><a href="#bfi.common.pberror.Authorization.ErrorCode">Authorization.ErrorCode</a></td>
                  <td></td>
                  <td><p>code is error code given by the server which can be used for caller to decide what is the next action. </p></td>
                </tr>
              
                <tr>
                  <td>sub_code</td>
                  <td><a href="#string">string</a></td>
                  <td></td>
                  <td><p>sub_code is free enum string that is intended for specific action for API consumer.
sub_code should be documented in each implementor service proto definition. </p></td>
                </tr>
              
            </tbody>
          </table>

          

        
      
        <h3 id="bfi.common.pberror.Business">Business</h3>
        <p>Business is type of error that can set custom `code` as specific to the service implementor.</p><p>The custom code itself should be documented in each service.</p><p>It will return 400 for HTTP.</p>

        
          <table class="field-table">
            <thead>
              <tr><td>Field</td><td>Type</td><td>Label</td><td>Description</td></tr>
            </thead>
            <tbody>
              
                <tr>
                  <td>trace</td>
                  <td><a href="#bfi.common.loginfo.Trace">bfi.common.loginfo.Trace</a></td>
                  <td></td>
                  <td><p>trace is optional information for developers, it contains identifier on the request for error tracking. </p></td>
                </tr>
              
                <tr>
                  <td>code</td>
                  <td><a href="#string">string</a></td>
                  <td></td>
                  <td><p>code is error code given by the server which can be used for caller to decide what is the next action.
code should be an enum of possible business error that is documented in each service proto file.
the `code` itself should be prefixed with service id for better identification.
e.g., `BRAVO_FOO_CREDIT_OVER_LIMIT`
`BRAVO_FOO` is the service name
`CREDIT_OVER_LIMIT` is business specific error. </p></td>
                </tr>
              
                <tr>
                  <td>info</td>
                  <td><a href="#string">string</a></td>
                  <td></td>
                  <td><p>info is the optional debugging info to help developer (API consumer).
The API consumer should identify the code to display appropriate message to the end user, not from this info as is. </p></td>
                </tr>
              
            </tbody>
          </table>

          

        
      
        <h3 id="bfi.common.pberror.Client">Client</h3>
        <p>Client is generic error message for the client.</p>

        
          <table class="field-table">
            <thead>
              <tr><td>Field</td><td>Type</td><td>Label</td><td>Description</td></tr>
            </thead>
            <tbody>
              
                <tr>
                  <td>trace</td>
                  <td><a href="#bfi.common.loginfo.Trace">bfi.common.loginfo.Trace</a></td>
                  <td></td>
                  <td><p>trace is optional information for developers, it contains identifier on the request for error tracking. </p></td>
                </tr>
              
                <tr>
                  <td>code</td>
                  <td><a href="#bfi.common.pberror.Client.ErrorCode">Client.ErrorCode</a></td>
                  <td></td>
                  <td><p>code is error code given by the server which can be used for caller to decide what is the next action. </p></td>
                </tr>
              
                <tr>
                  <td>info</td>
                  <td><a href="#string">string</a></td>
                  <td></td>
                  <td><p>info is the optional debugging info to help developer (API consumer).
The API consumer should identify the code to display appropriate message to the end user, not from this info as is. </p></td>
                </tr>
              
            </tbody>
          </table>

          

        
      
        <h3 id="bfi.common.pberror.RateLimited">RateLimited</h3>
        <p>RateLimited is type of error to indicate that the request is stopped by the server. e.g., too many failed attempt.</p><p>It will return 429 for HTTP.</p>

        
          <table class="field-table">
            <thead>
              <tr><td>Field</td><td>Type</td><td>Label</td><td>Description</td></tr>
            </thead>
            <tbody>
              
                <tr>
                  <td>trace</td>
                  <td><a href="#bfi.common.loginfo.Trace">bfi.common.loginfo.Trace</a></td>
                  <td></td>
                  <td><p>trace is optional information for developers, it contains identifier on the request for error tracking. </p></td>
                </tr>
              
                <tr>
                  <td>retry_after</td>
                  <td><a href="#google.protobuf.Timestamp">google.protobuf.Timestamp</a></td>
                  <td></td>
                  <td><p>retry_after caller can resend the request after this timestamp. </p></td>
                </tr>
              
                <tr>
                  <td>code</td>
                  <td><a href="#string">string</a></td>
                  <td></td>
                  <td><p>code is error code given by the server which can be used for caller to decide what is the next action.
code should be an enum of possible business error that is documented in each service proto file. </p></td>
                </tr>
              
            </tbody>
          </table>

          

        
      
        <h3 id="bfi.common.pberror.Server">Server</h3>
        <p>Server is error message that is related to server unhandled error. It will return 500 for HTTP.</p>

        
          <table class="field-table">
            <thead>
              <tr><td>Field</td><td>Type</td><td>Label</td><td>Description</td></tr>
            </thead>
            <tbody>
              
                <tr>
                  <td>trace</td>
                  <td><a href="#bfi.common.loginfo.Trace">bfi.common.loginfo.Trace</a></td>
                  <td></td>
                  <td><p>trace is optional information for developers, it contains identifier on the request for error tracking. </p></td>
                </tr>
              
                <tr>
                  <td>code</td>
                  <td><a href="#bfi.common.pberror.Server.ErrorCode">Server.ErrorCode</a></td>
                  <td></td>
                  <td><p>code is error code given by the server which can be used for caller to decide what is the next action. </p></td>
                </tr>
              
            </tbody>
          </table>

          

        
      
        <h3 id="bfi.common.pberror.Validation">Validation</h3>
        <p>ValidationError is common validation error that is usually reflecting invalid input from the user.</p><p>It will return 400 for HTTP.</p>

        
          <table class="field-table">
            <thead>
              <tr><td>Field</td><td>Type</td><td>Label</td><td>Description</td></tr>
            </thead>
            <tbody>
              
                <tr>
                  <td>trace</td>
                  <td><a href="#bfi.common.loginfo.Trace">bfi.common.loginfo.Trace</a></td>
                  <td></td>
                  <td><p>trace is optional information for developers, it contains identifier on the request for error tracking. </p></td>
                </tr>
              
                <tr>
                  <td>fields</td>
                  <td><a href="#bfi.common.pberror.Validation.Field">Validation.Field</a></td>
                  <td>repeated</td>
                  <td><p>fields is list of Field which was failed the validation. </p></td>
                </tr>
              
            </tbody>
          </table>

          

        
      
        <h3 id="bfi.common.pberror.Validation.Field">Validation.Field</h3>
        <p>Field is object to indicate which field has an error and optional info.</p>

        
          <table class="field-table">
            <thead>
              <tr><td>Field</td><td>Type</td><td>Label</td><td>Description</td></tr>
            </thead>
            <tbody>
              
                <tr>
                  <td>code</td>
                  <td><a href="#bfi.common.pberror.Validation.ErrorCode">Validation.ErrorCode</a></td>
                  <td></td>
                  <td><p>code is error code given by the server which can be used for caller to decide what is the next action. </p></td>
                </tr>
              
                <tr>
                  <td>field</td>
                  <td><a href="#string">string</a></td>
                  <td></td>
                  <td><p>field is the field which was failed the validation. </p></td>
                </tr>
              
                <tr>
                  <td>info</td>
                  <td><a href="#string">string</a></td>
                  <td></td>
                  <td><p>info is the optional debugging info to help developer (API consumer).
The API consumer should identify the code to display appropriate message to the end user. </p></td>
                </tr>
              
            </tbody>
          </table>

          

        
      

      
        <h3 id="bfi.common.pberror.Authorization.ErrorCode">Authorization.ErrorCode</h3>
        <p>ErrorCode is a list of code that is returned on unauthorized access error.</p>
        <table class="enum-table">
          <thead>
            <tr><td>Name</td><td>Number</td><td>Description</td></tr>
          </thead>
          <tbody>
            
              <tr>
                <td>UNKNOWN</td>
                <td>0</td>
                <td><p>UNKNOWN is default code for stopped access for invalid authorization.
It will return 401 for HTTP.</p></td>
              </tr>
            
              <tr>
                <td>INVALID_KEY</td>
                <td>1</td>
                <td><p>INVALID_KEY is when user set authorization key but server failed to validate in general.
e.g., bad token parsing, invalid jwt token parse, invalid token, key not found, etc.
It will return 401 for HTTP.</p></td>
              </tr>
            
              <tr>
                <td>PERMISSION_DENIED</td>
                <td>2</td>
                <td><p>PERMISSION_DENIED is when user provide a valid authorization key,
but is not allowed to do the requested operation.
It will return 403 for HTTP.</p></td>
              </tr>
            
          </tbody>
        </table>
      
        <h3 id="bfi.common.pberror.Client.ErrorCode">Client.ErrorCode</h3>
        <p>ErrorCode is a list of code that is returned on internal server related error.</p>
        <table class="enum-table">
          <thead>
            <tr><td>Name</td><td>Number</td><td>Description</td></tr>
          </thead>
          <tbody>
            
              <tr>
                <td>BAD_REQUEST</td>
                <td>0</td>
                <td><p>BAD_REQUEST is default error when server cannot parse given request from client.
It will return 400 for HTTP.</p></td>
              </tr>
            
              <tr>
                <td>METHOD_NOT_ALLOWED</td>
                <td>1</td>
                <td><p>METHOD_NOT_ALLOWED is when path is match but HTTP method does not match.
It will return 403 for HTTP.</p></td>
              </tr>
            
              <tr>
                <td>ROUTE_NOT_FOUND</td>
                <td>2</td>
                <td><p>ROUTE_NOT_FOUND is when requested route not found. (grpc gateway routing)
It will return 404 for HTTP.</p></td>
              </tr>
            
              <tr>
                <td>DATA_NOT_FOUND</td>
                <td>3</td>
                <td><p>DATA_NOT_FOUND is when requested data not found.
It will return 404 for HTTP.</p></td>
              </tr>
            
          </tbody>
        </table>
      
        <h3 id="bfi.common.pberror.Server.ErrorCode">Server.ErrorCode</h3>
        <p>ErrorCode is a list of code that is returned on internal server related error.</p>
        <table class="enum-table">
          <thead>
            <tr><td>Name</td><td>Number</td><td>Description</td></tr>
          </thead>
          <tbody>
            
              <tr>
                <td>UNKNOWN</td>
                <td>0</td>
                <td><p>UNKNOWN is when server unknown/unhandled error.</p></td>
              </tr>
            
              <tr>
                <td>INTERNAL_FAILURE</td>
                <td>1</td>
                <td><p>INTERNAL_FAILURE is when internal server error which is caused by unhandled exception or server panic.</p></td>
              </tr>
            
          </tbody>
        </table>
      
        <h3 id="bfi.common.pberror.Validation.ErrorCode">Validation.ErrorCode</h3>
        <p>ErrorCode is available error code for Validation error.</p>
        <table class="enum-table">
          <thead>
            <tr><td>Name</td><td>Number</td><td>Description</td></tr>
          </thead>
          <tbody>
            
              <tr>
                <td>UNKNOWN</td>
                <td>0</td>
                <td><p>UNKNOWN default unknown validation error.</p></td>
              </tr>
            
              <tr>
                <td>REQUIRED</td>
                <td>1</td>
                <td><p>REQUIRED field is required and cannot be empty.</p></td>
              </tr>
            
              <tr>
                <td>INVALID_FORMAT</td>
                <td>2</td>
                <td><p>INVALID_FORMAT can be string pattern, bad uuid, etc.</p></td>
              </tr>
            
              <tr>
                <td>INVALID_TYPE</td>
                <td>3</td>
                <td><p>INVALID_TYPE is when field value type is unsupported, e.g., file upload mime type.</p></td>
              </tr>
            
              <tr>
                <td>INVALID_DIMENSION</td>
                <td>4</td>
                <td><p>INVALID_DIMENSION is when field value dimension set is not in min/max allowed dimension range. e.g., image.</p></td>
              </tr>
            
              <tr>
                <td>OUT_OF_RANGE</td>
                <td>5</td>
                <td><p>OUT_OF_RANGE is when (chars, list, numeric, size) field value is out of defined min/max allowed range.</p></td>
              </tr>
            
              <tr>
                <td>TOO_SHORT</td>
                <td>6</td>
                <td><p>TOO_SHORT is when (chars, list) field value length is shorter that minimum allowed.</p></td>
              </tr>
            
              <tr>
                <td>TOO_LONG</td>
                <td>7</td>
                <td><p>TOO_LONG is when (chars, list) field value length is longer that maximum allowed.</p></td>
              </tr>
            
              <tr>
                <td>TOO_SMALL</td>
                <td>8</td>
                <td><p>TOO_SMALL is when (numeric, size) field value less than minimum allowed.</p></td>
              </tr>
            
              <tr>
                <td>TOO_LARGE</td>
                <td>9</td>
                <td><p>TOO_LARGE is when (numeric, size) larger than maximum allowed.</p></td>
              </tr>
            
              <tr>
                <td>NOT_IN_LIST</td>
                <td>10</td>
                <td><p>NOT_IN_LIST is when given value is not in the defined list.</p></td>
              </tr>
            
              <tr>
                <td>DUPLICATED</td>
                <td>11</td>
                <td><p>DUPLICATED is when given value is not allowed to have duplication.</p></td>
              </tr>
            
          </tbody>
        </table>
      

      

      
    

    <h2 id="scalar-value-types">Scalar Value Types</h2>
    <table class="scalar-value-types-table">
      <thead>
        <tr><td>.proto Type</td><td>Notes</td><td>C++</td><td>Java</td><td>Python</td><td>Go</td><td>C#</td><td>PHP</td><td>Ruby</td></tr>
      </thead>
      <tbody>
        
          <tr id="double">
            <td>double</td>
            <td></td>
            <td>double</td>
            <td>double</td>
            <td>float</td>
            <td>float64</td>
            <td>double</td>
            <td>float</td>
            <td>Float</td>
          </tr>
        
          <tr id="float">
            <td>float</td>
            <td></td>
            <td>float</td>
            <td>float</td>
            <td>float</td>
            <td>float32</td>
            <td>float</td>
            <td>float</td>
            <td>Float</td>
          </tr>
        
          <tr id="int32">
            <td>int32</td>
            <td>Uses variable-length encoding. Inefficient for encoding negative numbers – if your field is likely to have negative values, use sint32 instead.</td>
            <td>int32</td>
            <td>int</td>
            <td>int</td>
            <td>int32</td>
            <td>int</td>
            <td>integer</td>
            <td>Bignum or Fixnum (as required)</td>
          </tr>
        
          <tr id="int64">
            <td>int64</td>
            <td>Uses variable-length encoding. Inefficient for encoding negative numbers – if your field is likely to have negative values, use sint64 instead.</td>
            <td>int64</td>
            <td>long</td>
            <td>int/long</td>
            <td>int64</td>
            <td>long</td>
            <td>integer/string</td>
            <td>Bignum</td>
          </tr>
        
          <tr id="uint32">
            <td>uint32</td>
            <td>Uses variable-length encoding.</td>
            <td>uint32</td>
            <td>int</td>
            <td>int/long</td>
            <td>uint32</td>
            <td>uint</td>
            <td>integer</td>
            <td>Bignum or Fixnum (as required)</td>
          </tr>
        
          <tr id="uint64">
            <td>uint64</td>
            <td>Uses variable-length encoding.</td>
            <td>uint64</td>
            <td>long</td>
            <td>int/long</td>
            <td>uint64</td>
            <td>ulong</td>
            <td>integer/string</td>
            <td>Bignum or Fixnum (as required)</td>
          </tr>
        
          <tr id="sint32">
            <td>sint32</td>
            <td>Uses variable-length encoding. Signed int value. These more efficiently encode negative numbers than regular int32s.</td>
            <td>int32</td>
            <td>int</td>
            <td>int</td>
            <td>int32</td>
            <td>int</td>
            <td>integer</td>
            <td>Bignum or Fixnum (as required)</td>
          </tr>
        
          <tr id="sint64">
            <td>sint64</td>
            <td>Uses variable-length encoding. Signed int value. These more efficiently encode negative numbers than regular int64s.</td>
            <td>int64</td>
            <td>long</td>
            <td>int/long</td>
            <td>int64</td>
            <td>long</td>
            <td>integer/string</td>
            <td>Bignum</td>
          </tr>
        
          <tr id="fixed32">
            <td>fixed32</td>
            <td>Always four bytes. More efficient than uint32 if values are often greater than 2^28.</td>
            <td>uint32</td>
            <td>int</td>
            <td>int</td>
            <td>uint32</td>
            <td>uint</td>
            <td>integer</td>
            <td>Bignum or Fixnum (as required)</td>
          </tr>
        
          <tr id="fixed64">
            <td>fixed64</td>
            <td>Always eight bytes. More efficient than uint64 if values are often greater than 2^56.</td>
            <td>uint64</td>
            <td>long</td>
            <td>int/long</td>
            <td>uint64</td>
            <td>ulong</td>
            <td>integer/string</td>
            <td>Bignum</td>
          </tr>
        
          <tr id="sfixed32">
            <td>sfixed32</td>
            <td>Always four bytes.</td>
            <td>int32</td>
            <td>int</td>
            <td>int</td>
            <td>int32</td>
            <td>int</td>
            <td>integer</td>
            <td>Bignum or Fixnum (as required)</td>
          </tr>
        
          <tr id="sfixed64">
            <td>sfixed64</td>
            <td>Always eight bytes.</td>
            <td>int64</td>
            <td>long</td>
            <td>int/long</td>
            <td>int64</td>
            <td>long</td>
            <td>integer/string</td>
            <td>Bignum</td>
          </tr>
        
          <tr id="bool">
            <td>bool</td>
            <td></td>
            <td>bool</td>
            <td>boolean</td>
            <td>boolean</td>
            <td>bool</td>
            <td>bool</td>
            <td>boolean</td>
            <td>TrueClass/FalseClass</td>
          </tr>
        
          <tr id="string">
            <td>string</td>
            <td>A string must always contain UTF-8 encoded or 7-bit ASCII text.</td>
            <td>string</td>
            <td>String</td>
            <td>str/unicode</td>
            <td>string</td>
            <td>string</td>
            <td>string</td>
            <td>String (UTF-8)</td>
          </tr>
        
          <tr id="bytes">
            <td>bytes</td>
            <td>May contain any arbitrary sequence of bytes.</td>
            <td>string</td>
            <td>ByteString</td>
            <td>str</td>
            <td>[]byte</td>
            <td>ByteString</td>
            <td>string</td>
            <td>String (ASCII-8BIT)</td>
          </tr>
        
      </tbody>
    </table>
  </body>
</html>

